<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choir Audio Player</title>
    <script src="https://unpkg.com/wavesurfer.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }

        .audio-player {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 10px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            align-items: center;
        }

        .track {
            margin-bottom: 20px;
        }

        .waveform-container {
            display: flex;
            align-items: center;
            position: relative;
            height: 60px;
        }

        .waveform {
            flex: 1;
            margin-left: 10px;
        }

        .volume-container {
            display: flex;
            align-items: center;
            margin-left: 10px;
        }

        .volume-container input[type="range"] {
            transform: rotate(-90deg);
            transform-origin: center;
            width: 100px;
            margin-top: 20px;
        }

        .mute-btn {
            background-color: #225588;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 14px;
        }

        .mute-btn.muted {
            background-color: #888;
        }

        .play-btn {
            background-color: #225588;
            color: white;
            border: none;
            border-radius: 4px;
            padding: 8px 16px;
            font-size: 16px;
            cursor: pointer;
        }

        .play-btn.paused {
            background-color: #888;
        }

        .timestamp {
            font-size: 14px;
            text-align: right;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="audio-player">
        <div class="controls">
            <button id="playPauseBtn" class="play-btn">Play</button>
            <span id="timestamp" class="timestamp">0:00</span>
        </div>
        <div id="tracksContainer"></div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const playPauseBtn = document.getElementById("playPauseBtn");
            const timestamp = document.getElementById("timestamp");
            const tracksContainer = document.getElementById("tracksContainer");

            const trackData = [
                { name: "Soprano", file: "Tracks/Soprano.mp3" },
                { name: "Alto", file: "Tracks/Alto.mp3" },
                { name: "Tenor", file: "Tracks/Tenor.mp3" },
                { name: "Bass", file: "Tracks/Bass.mp3" }
            ];

            let waveSurfers = {};
            let isPlaying = false;

            const createTrackElement = (track) => {
                const trackElement = document.createElement("div");
                trackElement.className = "track";

                const trackHeader = document.createElement("span");
                trackHeader.textContent = track.name;
                trackElement.appendChild(trackHeader);

                const waveformContainer = document.createElement("div");
                waveformContainer.className = "waveform-container";

                const muteBtn = document.createElement("button");
                muteBtn.className = "mute-btn";
                muteBtn.textContent = "Mute";
                muteBtn.dataset.track = track.name.toLowerCase();
                waveformContainer.appendChild(muteBtn);

                const waveformDiv = document.createElement("div");
                waveformDiv.className = "waveform";
                waveformDiv.id = `waveform-${track.name.toLowerCase()}`;
                waveformContainer.appendChild(waveformDiv);

                const volumeContainer = document.createElement("div");
                volumeContainer.className = "volume-container";

                const volumeSlider = document.createElement("input");
                volumeSlider.type = "range";
                volumeSlider.min = 0;
                volumeSlider.max = 100;
                volumeSlider.value = 100;
                volumeSlider.dataset.track = track.name.toLowerCase();
                volumeContainer.appendChild(volumeSlider);

                waveformContainer.appendChild(volumeContainer);
                trackElement.appendChild(waveformContainer);

                tracksContainer.appendChild(trackElement);

                return { muteBtn, volumeSlider, waveformDiv };
            };

            trackData.forEach((track) => {
                const { muteBtn, volumeSlider, waveformDiv } = createTrackElement(track);

                const waveSurfer = WaveSurfer.create({
                    container: `#${waveformDiv.id}`,
                    waveColor: "#ccc",
                    progressColor: "#225588",
                    height: 60,
                    responsive: true,
                });

                waveSurfer.load(track.file);
                waveSurfers[track.name.toLowerCase()] = waveSurfer;

                muteBtn.addEventListener("click", () => {
                    waveSurfer.setMute(!waveSurfer.getMute());
                    muteBtn.textContent = waveSurfer.getMute() ? "Unmute" : "Mute";
                });

                volumeSlider.addEventListener("input", (e) => {
                    waveSurfer.setVolume(e.target.value / 100);
                });
            });

            playPauseBtn.addEventListener("click", () => {
                isPlaying = !isPlaying;
                playPauseBtn.textContent = isPlaying ? "Pause" : "Play";

                Object.values(waveSurfers).forEach((waveSurfer) => {
                    isPlaying ? waveSurfer.play() : waveSurfer.pause();
                });
            });

            setInterval(() => {
                const currentTime = waveSurfers.soprano.getCurrentTime();
                const minutes = Math.floor(currentTime / 60);
                const seconds = Math.floor(currentTime % 60).toString().padStart(2, "0");
                timestamp.textContent = `${minutes}:${seconds}`;
            }, 500);
        });
    </script>
</body>
</html>
